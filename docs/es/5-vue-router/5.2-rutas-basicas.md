# 4.2 Rutas Básicas y Navegación

## Rutas Básicas

Una ruta básica en Vue Router se define como un objeto con las siguientes propiedades:

```javascript
const routes = [
  {
    path: '/',              // Ruta en la URL
    name: 'home',           // Nombre opcional para referenciar la ruta
    component: HomeView,    // Componente a renderizar
    meta: {                // Metadatos opcionales
      requiresAuth: true
    },
    props: true           // Pasar parámetros de ruta como props
  },
  // Otras rutas...
];
```

## Navegación con `<router-link>`

El componente `<router-link>` es la forma declarativa de navegar entre rutas en Vue Router. Es similar a una etiqueta `<a>` de HTML, pero con características específicas para el enrutamiento del lado del cliente.

### Características principales:

1. **Navegación básica**:

   ```vue
   <router-link to="/about">Acerca de</router-link>
   ```
   
   - `to`: Especifica la ruta de destino. Puede ser un string con la ruta o un objeto con más opciones.

2. **Uso de nombres de ruta**:

   ```vue
   <router-link :to="{ name: 'user', params: { id: 123 }}">
     Ver perfil de usuario 123
   </router-link>
   ```
   
   - `name`: Nombre de la ruta definida en el enrutador.
   - `params`: Parámetros de la ruta.

3. **Otras propiedades útiles**:
   - `replace`: Reemplaza la entrada actual en el historial en lugar de agregar una nueva.
   - `tag`: Especifica la etiqueta HTML que se renderizará (por defecto es `<a>`).
   - `custom`: Permite personalizar completamente el renderizado del enlace.

### Ventajas sobre `<a>` tradicional:
- Maneja automáticamente el evento de clic para prevenir la recarga de página.
- Aplica automáticamente las clases de estado activo.
- Funciona con el modo de historial HTML5 y el modo hash.
- Permite navegación programática a través de `router.push()` o `router.replace()`.

## Navegación Programática

Además de usar `<router-link>`, puedes navegar mediante código utilizando el objeto `router` de Vue Router. Esto es especialmente útil cuando necesitas navegar después de ciertas acciones del usuario o condiciones lógicas.

### Uso básico con Composition API

```javascript
// En un componente con <script setup>
import { useRouter } from 'vue-router';

// Obtener la instancia del router
const router = useRouter();

// Navegar a una ruta específica
const goToAbout = () => {
  // Usando la ruta como string
  router.push('/about');
  
  // O usando un objeto con nombre de ruta y parámetros
  // router.push({ 
  //   name: 'user', 
  //   params: { id: 123 },
  //   query: { section: 'profile' } // Parámetros de consulta opcionales
  // });
};

// Navegar hacia atrás en el historial
const goBack = () => {
  // Navega una página hacia atrás
  router.go(-1);
  
  // Para ir hacia adelante: router.go(1)
};

// Reemplazar la entrada actual en el historial
const replaceRoute = () => {
  router.replace('/dashboard'); // No añade una nueva entrada al historial
};

// Navegar a una ruta con opciones adicionales
const navigateWithOptions = () => {
  router.push({
    path: '/profile',
    query: { tab: 'settings' }  // Añade ?tab=settings a la URL
  });
};
```

## Rutas con Parámetros

### Definición de rutas con parámetros

```javascript
const routes = [
  {
    path: '/user/:id',
    name: 'user',
    component: UserView,
    props: true // Pasa los parámetros como props al componente
  },
  {
    path: '/user/:username/post/:postId',
    name: 'post',
    component: PostView
  }
];
```

### Acceso a los parámetros

```vue
<template>
  <div>
    <h1>Perfil de {{ username }}</h1>
    <p>ID de usuario (desde la ruta): {{ userId }}</p>
  </div>
</template>

<script setup>
import { computed } from 'vue';
import { useRoute } from 'vue-router';

// Si usas props: true en la ruta
const props = defineProps({
  id: {
    type: String,
    required: true
  }
});

const route = useRoute();

// Podemos obtener el id tanto de props como de los parámetros de la ruta
const userId = computed(() => route.params.id ?? props.id);
const username = computed(() => route.params.username);
</script>
```

## Rutas con Querys

Las *querys* (o parámetros de consulta) son pares `clave=valor` que se añaden al final de la URL después de un `?`. Sirven para pasar información **opcional** a una ruta sin formar parte del `path`.

Por ejemplo:

- `https://midominio.com/products?category=books&order=desc`

En este caso, la ruta base es `/products` y la query es `?category=books&order=desc`.

### ¿Para qué se usan?

- **Filtros y ordenaciones** (ej: `?page=2&pageSize=20`, `?order=asc`).
- **Estados de vista** (ej: `?tab=settings`, `?view=grid`).
- **Búsquedas** (ej: `?q=vue%20router`).
- Cualquier dato opcional que no tenga sentido como parte fija del `path`.

### Definir una ruta que admite querys

No necesitas hacer nada especial: *cualquier* ruta puede recibir querys.

```javascript
const routes = [
  {
    path: '/products',
    name: 'products',
    component: ProductsView
  }
];
```

Podremos acceder a `/products`, `/products?page=2` o `/products?page=2&category=books` sin cambiar la definición.

### Acceder a las querys en el componente

```vue
<template>
  <div>
    <h1>Listado de productos</h1>
    <p>Página actual: {{ currentPage }}</p>
    <p>Categoría: {{ currentCategory ?? 'todas' }}</p>
  </div>
</template>

<script setup>
import { computed } from 'vue';
import { useRoute } from 'vue-router';

const route = useRoute();

// Los valores de query SIEMPRE son strings (o arrays de strings)
const currentPage = computed(() => Number(route.query.page ?? 1));
const currentCategory = computed(() => route.query.category ?? null);
</script>
```

### Navegar usando querys con `<router-link>`

```vue
<template>
  <nav>
    <!-- Pasando la query como string -->
    <router-link to="/products?page=1">Página 1</router-link>
    <router-link to="/products?page=2">Página 2</router-link>

    <!-- Usando objeto, combinando nombre de ruta y querys -->
    <router-link :to="{ name: 'products', query: { page: 3, category: 'books' } }">
      Libros página 3
    </router-link>
  </nav>
</template>
```

### Navegación programática con querys

```javascript
import { useRouter } from 'vue-router';

const router = useRouter();

const goToFilteredProducts = () => {
  router.push({
    name: 'products',
    query: {
      page: 1,
      category: 'electronics',
      order: 'desc'
    }
  });
};
```

### Combinar params y querys

```javascript
const routes = [
  {
    path: '/user/:id',
    name: 'user',
    component: UserView
  }
];

// Ejemplo de navegación
router.push({
  name: 'user',
  params: { id: 123 },
  query: { section: 'profile', tab: 'activity' }
});

// Resultado: /user/123?section=profile&tab=activity
```

## Rutas Anidadas

Las rutas anidadas permiten crear jerarquías de componentes:

```javascript
const routes = [
  {
    path: '/settings',
    component: SettingsLayout,
    children: [
      {
        path: 'profile',
        component: UserProfile
      },
      {
        path: 'account',
        component: UserAccount
      },
      {
        path: 'privacy',
        component: PrivacySettings
      },
      // Ruta vacía que coincide con /settings
      { path: '', redirect: 'profile' }
    ]
  }
];
```

En el componente `SettingsLayout.vue`:

```vue
<template>
  <div class="settings-layout">
    <nav>
      <router-link to="/settings/profile">Perfil</router-link>
      <router-link to="/settings/account">Cuenta</router-link>
      <router-link to="/settings/privacy">Privacidad</router-link>
    </nav>
    <div class="settings-content">
      <router-view />
    </div>
  </div>
</template>
```

## Siguiente paso

Ahora que conoces las rutas básicas, puedes aprender sobre [navegación avanzada](5.3-navegacion-avanzada.md).
