# 2.6. Enlace de Entradas de Formulario (Form Input Bindings)

## Introducción a v-model

`v-model` crea una vinculación bidireccional automática entre el valor de un elemento de formulario y una variable de JavaScript. Simplifica el código frente a bindings manuales como `:value` + `@input`.

Se adapta al tipo de elemento:

- **Input de texto / Textarea**: usa `value` y el evento `input`.
- **Checkbox / Radio**: usa `checked` y el evento `change`.
- **Select**: usa `value` y el evento `change`.

Nota importante: ignora valores HTML iniciales (`value`, `checked`, `selected`); el estado de JS es la “fuente de verdad”. Inicializa en JS (por ejemplo con `ref`).

---

## Uso con elementos básicos

### Input de texto

```html
<input v-model="message" placeholder="edit me" />
<p>Message: {{ message }}</p>
```

Sincroniza en tiempo real. Para idiomas con IME (chino, japonés), puede ser preferible escuchar `compositionend` o usar `.lazy`.

### Textarea (multilínea)

```html
<textarea v-model="message"></textarea>
<p style="white-space: pre-line;">{{ message }}</p>
```

No uses interpolación `{{ }}` dentro de `<textarea>`.

### Checkbox

- Simple (booleano):

```html
<input type="checkbox" v-model="checked" />
<p>Checked: {{ checked }}</p>
```

- Múltiples (array): vincula a un array de valores seleccionados.

```html
<label><input type="checkbox" value="Jack" v-model="checkedNames" /> Jack</label>
<label><input type="checkbox" value="John" v-model="checkedNames" /> John</label>
<label><input type="checkbox" value="Mike" v-model="checkedNames" /> Mike</label>
<p>Seleccionados: {{ checkedNames.join(', ') }}</p>
```

### Radio (selección única)

```html
<label><input type="radio" value="One" v-model="picked" /> One</label>
<label><input type="radio" value="Two" v-model="picked" /> Two</label>
<p>Elegido: {{ picked }}</p>
```

### Select

- Simple:

```html
<select v-model="selected">
  <option disabled value="">Elige una opción</option>
  <option>A</option>
  <option>B</option>
  <option>C</option>
</select>
<p>Seleccionado: {{ selected }}</p>
```

- Múltiple: agrega `multiple` y vincula a un array.

```html
<select v-model="selectedMany" multiple size="4">
  <option value="a">A</option>
  <option value="b">B</option>
  <option value="c">C</option>
  <option value="d">D</option>
</select>
<p>Seleccionados: {{ selectedMany.join(', ') }}</p>
```

- Dinámico (con `v-for` y objetos `{ text, value }`): incluye opción inicial vacía y desactivada para compatibilidad (por ej. iOS).

```html
<select v-model="country">
  <option disabled value="">Selecciona país</option>
  <option v-for="opt in countries" :key="opt.value" :value="opt.value">
    {{ opt.text }}
  </option>
</select>
```

```js
import { ref } from 'vue'
export default {
  setup() {
    const countries = ref([
      { text: 'España', value: 'es' },
      { text: 'Francia', value: 'fr' },
      { text: 'Italia', value: 'it' }
    ])
    const country = ref('')
    return { countries, country }
  }
}
```

---

## Vinculación de valores (value bindings)

- Checkbox con valores personalizados: `true-value` y `false-value`.

```html
<input type="checkbox" v-model="agree" true-value="yes" false-value="no" />
<p>Acepta: {{ agree }}</p>
```

- Radio dinámico: `:value="first"`.

```html
<input type="radio" :value="first" v-model="pickedObj" />
```

- Select con objetos: vincula el objeto completo.

```html
<select v-model="selectedUser">
  <option :value="{ id: 1, name: 'Ada' }">Ada</option>
  <option :value="{ id: 2, name: 'Linus' }">Linus</option>
</select>
<pre>{{ selectedUser }}</pre>
```

Nota: cuando vinculas objetos, la comparación es por referencia; usa claves estables o normaliza si es necesario.

---

## Modificadores de v-model

- `.lazy`: actualiza en `change` en lugar de `input` (útil para IME o debounce).

```html
<input v-model.lazy="msg" />
```

- `.number`: convierte con `parseFloat()` (automático en `type="number"`).

```html
<input type="number" v-model.number="age" />
```

- `.trim`: elimina espacios iniciales/finales.

```html
<input v-model.trim="query" />
```

---

## v-model en componentes personalizados

Vue soporta `v-model` en componentes reutilizables para entradas con lógica propia. Requiere la prop `modelValue` y emitir `update:modelValue`. Consulta la guía de componentes para detalles.

---

En resumen, `v-model` hace los formularios intuitivos y reactivos, y se integra bien con validación y accesibilidad. Para ejemplos completos, consulta la documentación oficial.

---

Siguiente sección: [2.7. Ciclo de Vida](./2.7-ciclo-vida.md)
