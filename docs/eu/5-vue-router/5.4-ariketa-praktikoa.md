# 5.4 Ariketa Praktikoa: Bloga Vue Router-ekin

Ariketa honetan blog sinple bat sortuko duzu Vue Router erabiliz. Blogak honako ezaugarriak izango ditu:

## Baldintzak

1. **Beharrezko orriak**:

    - Hasiera: azken argitalpenen zerrenda erakusten du
    - Argitalpenaren xehetasuna: argitalpen osoa erakusten du
    - Erabiltzaile profila: egilearen informazioa erakusten du
    - Argitalpena sortu: argitalpen berria sortzeko formularioa (babestua)
    - 404 orria: existitzen ez diren ibilbideentzako

2. **Ezaugarriak**:

    - Orrien arteko nabigazioa
    - Parametro dinamikoak dituzten ibilbideak
    - Habiaratutako ibilbideak
    - Ibilbideen babesa (auth)
    - Osagaien karga alferra (lazy loading)
    - Ibilbideen arteko trantsizioak

## Proiektuaren Egiturak

```text
src/
  components/
    NavBar.vue
    PostList.vue
    PostItem.vue
  views/
    HomeView.vue
    PostView.vue
    UserView.vue
    CreatePostView.vue
    LoginView.vue
    NotFoundView.vue
  router/
    index.js
  App.vue
  main.js
```

## Urratsez Urratseko Argibideak

### 1. Hasierako konfigurazioa

1. Sortu Vue proiektu berri bat Vite-rekin:
   ```bash
   npm create vite@latest vue-blog -- --template vue
   cd vue-blog
   npm install vue-router@4
   ```

2. Sortu goiko egituran agertzen diren karpetak eta fitxategiak.

### 2. Router-a konfiguratzea

`router/index.js` fitxategian:

```javascript
import { createRouter, createWebHistory } from 'vue-router';

// Bistak
const HomeView = () => import('@/views/HomeView.vue');
const PostView = () => import('@/views/PostView.vue');
const UserView = () => import('@/views/UserView.vue');
const CreatePostView = () => import('@/views/CreatePostView.vue');
const LoginView = () => import('@/views/LoginView.vue');
const NotFoundView = () => import('@/views/NotFoundView.vue');

const routes = [
  {
    path: '/',
    name: 'home',
    component: HomeView
  },
  {
    path: '/post/:id',
    name: 'post',
    component: PostView,
    props: true
  },
  {
    path: '/user/:username',
    name: 'user',
    component: UserView,
    props: true
  },
  {
    path: '/create',
    name: 'create',
    component: CreatePostView,
    meta: { requiresAuth: true }
  },
  {
    path: '/login',
    name: 'login',
    component: LoginView
  },
  {
    path: '/:pathMatch(.*)*',
    name: 'not-found',
    component: NotFoundView
  }
];

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes,
  scrollBehavior(to, from, savedPosition) {
    return savedPosition || { top: 0 };
  }
});

// Nabigazio guardia globala
router.beforeEach((to, from, next) => {
  const isAuthenticated = localStorage.getItem('isAuthenticated');
  
  if (to.matched.some(record => record.meta.requiresAuth)) {
    if (!isAuthenticated) {
      next({
        name: 'login',
        query: { redirect: to.fullPath }
      });
    } else {
      next();
    }
  } else {
    next();
  }
});

export default router;
```

### 3. Osagaiak sortzea

#### NavBar.vue
```vue
<template>
  <nav>
    <router-link to="/" class="logo">Nire Bloga</router-link>
    <div class="nav-links">
      <router-link to="/">Hasiera</router-link>
      <router-link v-if="isAuthenticated" to="/create">Post berria</router-link>
      <router-link v-if="!isAuthenticated" to="/login">Saioa hasi</router-link>
      <button v-else @click="logout" class="logout-btn">Saioa itxi</button>
    </div>
  </nav>
</template>

<script setup>
import { computed } from 'vue';
import { useRouter } from 'vue-router';

const router = useRouter();
const isAuthenticated = computed(() => localStorage.getItem('isAuthenticated'));

const logout = () => {
  localStorage.removeItem('isAuthenticated');
  router.push('/login');
};
</script>

<style scoped>
/* Nabigazio barraren estiloak */
</style>
```

### 4. Bistak sortzea

#### HomeView.vue
```vue
<template>
  <div class="home">
    <h1>Azken argitalpenak</h1>
    <PostList :posts="posts" />
  </div>
</template>

<script setup>
import { ref } from 'vue';
import PostList from '@/components/PostList.vue';

// Adibidezko datuak
const posts = ref([
  { id: 1, title: 'Nire lehen posta', excerpt: 'Adibidezko edukia...', author: 'erabiltzaile1' },
  { id: 2, title: 'Bigarren posta', excerpt: 'Eduki gehiago...', author: 'erabiltzaile2' }
]);
</script>
```

### 5. Autentifikazioa inplementatzea

`LoginView.vue` fitxategian:
```vue
<template>
  <div class="login">
    <h1>Saioa hasi</h1>
    <form @submit.prevent="handleLogin">
      <input v-model="username" type="text" placeholder="Erabiltzailea" required>
      <input v-model="password" type="password" placeholder="Pasahitza" required>
      <button type="submit">Sartu</button>
    </form>
  </div>
</template>

<script setup>
import { ref } from 'vue';
import { useRouter, useRoute } from 'vue-router';

const username = ref('');
const password = ref('');
const router = useRouter();
const route = useRoute();

const handleLogin = () => {
  // Baliozkotze sinplea
  if (username.value && password.value) {
    localStorage.setItem('isAuthenticated', 'true');
    const redirect = route.query.redirect || '/';
    router.push(redirect);
  } else {
    alert('Mesedez, sartu erabiltzailea eta pasahitza');
  }
};
</script>
```

## Ariketa Gehigarriak

1. **Hobetu autentifikazioa**:
   
    - Inplementatu autentifikazio erreala API batekin
    - Gehitu JWT tokenen kudeaketa
    - Inplementatu tokenen berritzea

2. **Gehitu ezaugarri gehiago**:
   
    - Iruzkin sistema bat
    - Posten bilaketa
    - Kategoriak eta etiketak
    - Emaitzen orrikatzea (paginazioa)

3. **Hobetu erabiltzaile esperientzia**:
   
    - Gehitu karga eskeletoa (skeleton loading)
    - Akatsen kudeaketa
    - Jakinarazpenak (notifikazioak)

## Errepasorako Galderak

1. Nola kudeatuko zenuke ibilbideen babesa benetako aplikazio batean?
2. Zein da lazy loading erabiltzeko abantaila ibilbideetan?
3. Nola inplementatuko zenuke rol eta baimenen sistema bat?
4. Zein estrategia erabiliko zenituzke aplikazioaren egoera globala kudeatzeko?

## Baliabide Gehigarriak

- [Vue Router dokumentazio ofiziala](https://router.vuejs.org/)
- [Nabigazio eredu arruntak](https://router.vuejs.org/guide/essentials/navigation.html)
- [Autentifikazioa Vue Router-rekin](https://router.vuejs.org/guide/advanced/navigation-guards.html#global-before-guards)

## Hurrengo urratsa

Router-aren ariketa praktikoa amaitu duzu! Orain Vue Router-en ezaugarri nagusiekin praktikatu duzunez, prest zaude egoera kudeaketa Pinia-rekin esploratzeko.

[â†’ Hurrengoa: Pinia-ren sarrera](../6-pinia/6.1-sarrera.md)
