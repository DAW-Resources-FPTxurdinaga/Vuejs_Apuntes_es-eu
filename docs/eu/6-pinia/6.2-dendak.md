# 6.2 Pinia-n Dendak Sortzea eta Erabiltzea

## Zer da Denda (Store) bat?

Pinia-n, denda batek egoera eta negozio-logika biltzen ditu. Vuex-ek ez bezala, ez dituzu mutazioak behar; ekintzak (actions) nahikoa dira.

## Zure lehen denda sortzea

1. Sortu dendarako fitxategi bat, adibidez `stores/counter.js`:

```javascript
import { defineStore } from 'pinia'

export const useCounterStore = defineStore('counter', {
  // Egoera erreaktiboa
  state: () => ({
    count: 0,
    name: 'Kontagailua',
  }),
  
  // Getters (kalkulatuak)
  getters: {
    doubleCount: (state) => state.count * 2,
    // Beste getter batzuk erabiliz
    greeting: (state) => {
      return `Kaixo, ${state.name}. Kontagailua ${state.count} da`
    },
  },
  
  // Ekintzak (metodoak)
  actions: {
    increment() {
      this.count++
    },
    async fetchData() {
      try {
        const response = await fetch('https://api.example.com/data')
        const data = await response.json()
        // Egoera eguneratu
        this.data = data
        return data
      } catch (error) {
        console.error('Datuak kargatzerakoan errorea:', error)
      }
    },
  },
})
```

## Denda bat osagaian erabiltzea

```vue
<template>
  <div>
    <h1>{{ store.name }}</h1>
    <p>Kontagailua: {{ store.count }}</p>
    <p>Bikoitia: {{ store.doubleCount }}</p>
    <p>{{ store.greeting }}</p>
    
    <button @click="store.increment()">Handitu</button>
    <button @click="store.$reset()">Berrezarri</button>
  </div>
</template>

<script setup>
import { useCounterStore } from '@/stores/counter'

const store = useCounterStore()

// Egoerara sartzea
console.log(store.count) // 0

// Ekintza bat deitzea
store.increment()

// Ekintza asinkronoak
const data = await store.fetchData()
</script>
```

## Desegituratze Erreaktiboa

Erreaktibitatea mantentzeko desegituratzean, erabili `storeToRefs`:

```vue
<script setup>
import { storeToRefs } from 'pinia'
import { useCounterStore } from '@/stores/counter'

const store = useCounterStore()
// Honek erreaktibitatea mantenduko du
const { count, name } = storeToRefs(store)
// Ekintzak zuzenean desegitura daitezke
const { increment } = store
</script>
```

## Egoera berrezartzea

Egoera hasierako balioetara edozein unetan berrezar dezakezu:

```javascript
const store = useStore()
store.$reset()
```

## Aldaketetara harpidetza

Egoerako aldaketetara harpidetu zaitezke:

```javascript
store.$subscribe((mutation, state) => {
  // Aldaketa bakoitzaren ondoren exekutatzen da
  console.log('Aldaketa detektatua:', mutation, state)
})
```

Oinarrizko kontzeptu hauekin, modu eraginkorrean hasi zaitezke zure Vue aplikazioaren egoera Pinia-rekin kudeatzen.

## Hurrengo urratsa

Pinia-ko denden oinarriak ikasi ondoren, hurrengo pausoa da [Pinia-ko Gai Aurreratuak](./6.3-aurreratua.md) aztertzea; bertan, egoeraren persistentzia, testing-a, Vue Router-ekin integrazioa eta gehiago ikusiko dituzu.
